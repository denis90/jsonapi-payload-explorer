{"version":3,"sources":["PayloadSample.js","compoments/JSONEditor.js","compoments/Tree.js","utils/serialize.js","utils/tree.js","compoments/Viewer.js","App.js","utils/is-json-string.js","index.js"],"names":["PayloadSample","JSONEditor","react_default","a","createElement","className","this","props","Codemirror_default","value","payload","onChange","onPayloadChanged","options","lineNumbers","mode","name","json","theme","React","Component","Tree","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","treeData","root","_this2","index_esm","canDrag","rowHeight","object","node","subtitleHeight","setState","TEMP_ID","serializeObject","data","included","id","tempId","uuid","concat","type","attributes","method","children","relationships","key","relationshipData","Array","isArray","_object$children","map","relationship","serializeRelationship","push","apply","toConsumableArray","child","find","findInIncluded","decorateForTree","keys","length","expanded","title","attr","subtitle","attributeList","JSON","stringify","forEach","Viewer","parse","_","rootObject","Tree_Tree","App","payloadSample","invalid","bind","assertThisInitialized","str","isJSONString","JSONEditor_JSONEditor","cx","Viewer_Viewer","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.46b9d990.chunk.js","sourcesContent":["export default `{\n  \"data\": {\n    \"type\": \"articles\",\n    \"attributes\": {\n      \"title\": \"Sideposting with json:api\"\n    },\n    \"relationships\": {\n      \"tags\": {\n        \"data\": [{ \"type\": \"tags\", \"id\": \"9\" },\n                 { \"type\": \"tags\", \"temp-id\": \"1\" },\n                 { \"type\": \"tags\", \"temp-id\": \"2\" }]\n      }\n    }\n  },\n  \"included\": [\n    {\n      \"type\": \"tags\",\n      \"temp-id\": \"1\",\n      \"attributes\": {\n        \"label\": \"JSON\",\n        \"total\": 42\n      }\n    },\n    {\n      \"type\": \"tags\",\n      \"temp-id\": \"2\",\n      \"attributes\": {\n        \"label\": \"REST\"\n      }\n    }\n  ]\n}`;\n","import React from 'react';\n\nimport CodeMirror from 'react-codemirror';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/solarized.css';\n\nimport './JSONEditor.css';\n\nexport default class JSONEditor extends React.Component {\n  render() {\n    return(\n      <div className={this.props.className}>\n        <CodeMirror\n          value={this.props.payload}\n          onChange={this.props.onPayloadChanged}\n          options={{\n            lineNumbers: true,\n            mode: { name: \"javascript\", json: true },\n            theme: 'solarized'\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport SortableTree from 'react-sortable-tree';\nimport 'react-sortable-tree/style.css';\n\nconst DEFAULT_ROW_HEIGHT = 62;\n\nexport default class Tree extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {treeData: [this.props.root]};\n  }\n\n  render() {\n    return (\n      <SortableTree\n        canDrag={false}\n        rowHeight={(object) => DEFAULT_ROW_HEIGHT + (object.node.subtitleHeight|| 0)}\n        treeData={this.state.treeData}\n        onChange={(treeData) => this.setState({ treeData })}\n      />\n    );\n  }\n}\n","const TEMP_ID = 'temp-id';\n\nexport default function serialize(object) {\n  if (!object.data) return {};\n  return serializeObject(object.data, object.included || []);\n}\n\nfunction serializeObject(data, included) {\n  let object = {\n    id: data.id,\n    tempId: data[TEMP_ID],\n    uuid: `${data.type}-${data.id || data[TEMP_ID]}`,\n    type: data.type,\n    attributes: data.attributes || {},\n    method: data.method,\n    children: []\n  };\n\n  let { relationships } = data;\n\n  for (let key in relationships) {\n    let relationshipData = relationships[key][\"data\"];\n\n    if (Array.isArray(relationshipData)) {\n      let children = relationshipData.map((relationship) => (\n        serializeRelationship(relationship, included)\n      ));\n      object.children.push(...children);\n    } else {\n      let child = serializeRelationship(relationshipData, included);\n      object.children.push(child);\n    }\n  }\n\n  return object;\n}\n\nfunction serializeRelationship(data, included) {\n  let relationshipData = findInIncluded(data, included) || data;\n  let relationship = serializeObject(relationshipData, included);\n\n  if (!relationship.method) relationship.method = data.method;\n\n  return relationship;\n}\n\nfunction findInIncluded(data, included) {\n  let { id, type, [TEMP_ID]: tempId } = data;\n\n  if (!!id) {\n    return included.find((data) => data.type === type && data.id === id);\n  } else if (!!tempId) {\n    return included.find((data) => data.type === type && data[TEMP_ID] === tempId);\n  }\n\n  return null;\n}\n","import React from 'react';\n\nexport default function decorateForTree(object) {\n  if (Object.keys(object).length === 0) return {};\n  object.expanded = true;\n  object.title = title(object);\n  object.subtitle = subtitle(object);\n  object.subtitleHeight = Object.keys(object.attributes).length * 11;\n\n  object.children.forEach((child) => decorateForTree(child));\n\n  return object;\n}\n\nfunction title(object) {\n  if (!object.id && !object.tempId) {\n    return object.type;\n  }\n\n  let attr = object.id ? 'id' : 'temp-id';\n  return `${object.type} (${attr} = '${object.id || object.tempId}')`;\n}\n\nfunction subtitle(object) {\n  let attributeList = [];\n  for(let key in object.attributes) {\n    let value = object.attributes[key];\n    if (typeof(value) === 'object') {\n      value = JSON.stringify(value);\n    }\n    attributeList.push(\n      <li key={key}>{key}: {value}</li>\n    );\n  }\n  return (<ul>{ attributeList}</ul>);\n}\n","import React, { Component } from 'react';\nimport Tree from './Tree';\n\nimport serialize from '../utils/serialize';\nimport decorateForTree from '../utils/tree';\n\nexport default class Viewer extends Component {\n  render() {\n    let json = {};\n    try {\n      json = JSON.parse(this.props.payload);\n    } catch(_) {};\n    let rootObject = decorateForTree(serialize(json));\n\n    return(\n      <div className={this.props.className}>\n        <Tree root={rootObject} key={this.props.payload}/>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport cx from 'classnames';\n\nimport payloadSample from './PayloadSample.js';\nimport isJSONString from './utils/is-json-string';\nimport JSONEditor from './compoments/JSONEditor';\nimport Viewer from './compoments/Viewer';\n\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { payload: payloadSample, invalid: false };\n    this.onPayloadChanged = this.onPayloadChanged.bind(this);\n  }\n\n  onPayloadChanged(payload) {\n    if (!payload) { payload = '{}'; }\n    let invalid = !isJSONString(payload);\n    this.setState({ payload, invalid });\n  }\n\n  render() {\n    let { invalid } = this.state;\n\n    return(\n      <div className=\"App\">\n        <JSONEditor\n          className={ cx(\"sidepane\", { invalid }) }\n          payload={this.state.payload}\n          onPayloadChanged={this.onPayloadChanged} />\n\n        <Viewer className=\"sidepane\" payload={this.state.payload}/>\n      </div>\n    );\n  }\n}\n","export default function isJSONString(str) {\n  if(typeof(str) !== 'string') return false;\n  try { JSON.parse(str); } catch (_) { return false; }\n  return true;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}